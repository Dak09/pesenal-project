<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JAS DARYN — Запись на кружки</title>
  <style>
    :root { --bg:#0b0f1a; --card:#121a2b; --text:#eef2ff; --muted:#a7b0d6; --accent:#ff3b30; }
    * { box-sizing: border-box; }
    body {
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 800px at 20% 10%, #162044, var(--bg));
      color: var(--text);
    }
    a { color: inherit; text-decoration: none; }

    .nav {
      position: sticky; top: 0; z-index: 10;
      background: rgba(8,12,22,0.75);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .nav-inner {
      max-width: 820px; margin: 0 auto; padding: 14px 18px;
      display: flex; align-items: center; justify-content: space-between; gap: 12px;
    }
    .brand { display:flex; align-items:center; gap:12px; font-weight: 800; letter-spacing: 0.5px; }
    .logo {
      width: 40px; height: 40px; border-radius: 12px;
      background: linear-gradient(135deg, rgba(255,59,48,0.95), rgba(255,255,255,0.08));
      display:grid; place-items:center; font-weight: 900;
      box-shadow: 0 12px 30px rgba(255,59,48,0.15);
    }
    .menu { display:flex; gap: 14px; font-size: 14px; color: var(--muted); }
    .menu a { padding: 8px 10px; border-radius: 10px; }
    .menu a:hover { background: rgba(255,255,255,0.06); color: var(--text); }

    .wrap { max-width: 820px; margin: 0 auto; padding: 28px 18px 60px; }
    .hero { display:grid; gap: 10px; margin: 10px 0 18px; }
    .title { font-size: 34px; line-height: 1.1; margin: 0; }
    .subtitle { margin: 0; color: var(--muted); font-size: 15px; max-width: 70ch; }

    .card {
      background: rgba(18,26,43,0.72);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 18px 50px rgba(0,0,0,0.30);
    }
    .card h2 { margin: 0 0 10px; font-size: 18px; }
    .hint { color: var(--muted); font-size: 13px; margin: 0 0 14px; }

    .fields-2 { display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 12px; }
    @media (max-width: 520px) { .fields-2 { grid-template-columns: 1fr; } }

    .field { display:flex; flex-direction: column; gap: 6px; margin-top: 10px; }
    .field label { font-size: 13px; color: var(--muted); }
    .field input {
      padding: 12px 12px; border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.18);
      color: var(--text);
      outline: none;
    }
    .field input:focus { border-color: rgba(255,59,48,0.55); box-shadow: 0 0 0 4px rgba(255,59,48,0.12); }

    .clubs { display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 12px; }
    @media (max-width: 520px) { .clubs { grid-template-columns: 1fr; } }

    .chip {
      display:flex; align-items:flex-start; gap: 10px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.04);
    }
    .chip:hover { border-color: rgba(255,255,255,0.18); }
    .chip b { display:block; font-size: 14px; }
    .chip small { color: var(--muted); }
    input[type="checkbox"] { width: 18px; height: 18px; margin-top: 2px; accent-color: var(--accent); }

    .actions { display:flex; gap: 10px; align-items:center; margin-top: 14px; flex-wrap: wrap; }
    button {
      border: none; cursor: pointer;
      padding: 12px 14px;
      border-radius: 12px;
      font-weight: 700;
      background: var(--accent);
      color: white;
    }
    button.secondary {
      background: rgba(255,255,255,0.08);
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.12);
    }

    /* Сообщение сделаем заметным */
    .msg {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.18);
      font-size: 14px;
      white-space: pre-line;
      min-height: 22px;
    }
    .msg.ok { border-color: rgba(124,255,178,0.35); color: #7CFFB2; }
    .msg.err { border-color: rgba(255,180,176,0.35); color: #ffb4b0; }

    footer { margin-top: 18px; color: var(--muted); font-size: 12px; }
    code { color: #c7d2fe; }
  </style>
</head>

<body>
  <header class="nav">
    <div class="nav-inner">
      <div class="brand">
        <div class="logo">JD</div>
        <div>JAS DARYN</div>
      </div>
      <nav class="menu">
        <a href="#signup">Запись</a>
        <a href="#clubs">Кружки</a>
        <a href="#contacts">Контакты</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1 class="title">Запись на кружки <span style="color:var(--accent)">JAS DARYN</span></h1>
      <p class="subtitle">Выберите кружки, заполните данные ребёнка и оставьте номер телефона — и мы свяжемся с вами.</p>
    </section>

    <div class="card" id="signup">
      <h2>Форма записи</h2>
      <p class="hint">Заполните имя/фамилию/возраст, выберите кружки и укажите телефон.</p>

      <div class="fields-2">
        <div class="field">
          <label for="firstName">Имя</label>
          <input id="firstName" type="text" placeholder="Например: Алина" autocomplete="given-name" />
        </div>
        <div class="field">
          <label for="lastName">Фамилия</label>
          <input id="lastName" type="text" placeholder="Например: Иманова" autocomplete="family-name" />
        </div>
      </div>

      <div class="field">
        <label for="age">Возраст (3–18)</label>
        <input id="age" type="number" min="3" max="18" placeholder="Например: 10" />
      </div>

      <div class="clubs" id="clubs">
        <label class="chip">
          <input type="checkbox" name="club" value="Dance (Modern/National)" />
          <div><b>Dance (Modern/National)</b><small>Танцы</small></div>
        </label>
        <label class="chip">
          <input type="checkbox" name="club" value="Chess" />
          <div><b>Chess</b><small>Шахматы</small></div>
        </label>
        <label class="chip">
          <input type="checkbox" name="club" value="Drawing / Art" />
          <div><b>Drawing / Art</b><small>Рисование</small></div>
        </label>
        <label class="chip">
          <input type="checkbox" name="club" value="Vocals" />
          <div><b>Vocals</b><small>Вокал</small></div>
        </label>
        <label class="chip">
          <input type="checkbox" name="club" value="Dombra" />
          <div><b>Dombra</b><small>Домбра</small></div>
        </label>
        <label class="chip">
          <input type="checkbox" name="club" value="Robotics" />
          <div><b>Robotics</b><small>Робототехника</small></div>
        </label>
      </div>

      <div class="field">
        <label for="phone">Номер телефона (пример: +7 777 123 45 67)</label>
        <input id="phone" type="tel" placeholder="+7 _ _ _ _" autocomplete="tel" />
      </div>

      <div class="actions">
        <button id="submitBtn" type="button">Отправить заявку</button>
        <button class="secondary" id="viewBtn" type="button">Посмотреть заявки</button>
        <button class="secondary" id="clearBtn" type="button">Очистить</button>
      </div>

      <div id="message" class="msg" aria-live="polite"></div>

      <footer id="contacts">
        Контакты: WhatsApp/Phone: <code>+77053703521</code> • Адрес: <code>Атырау</code>
      </footer>
    </div>
  </main>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const msg = document.getElementById('message');
      const phoneInput = document.getElementById('phone');
      const firstNameInput = document.getElementById('firstName');
      const lastNameInput = document.getElementById('lastName');
      const ageInput = document.getElementById('age');

      const submitBtn = document.getElementById('submitBtn');
      const viewBtn = document.getElementById('viewBtn');
      const clearBtn = document.getElementById('clearBtn');

      function getSelectedClubs() {
        return Array.from(document.querySelectorAll('input[name="club"]:checked')).map(x => x.value);
      }
      function normalizePhone(raw) { return raw.replace(/[^\d+]/g, '').trim(); }
      function isValidPhone(raw) {
        const digits = normalizePhone(raw).replace(/\D/g, '');
        return digits.length >= 10 && digits.length <= 12;
      }
      function cleanText(raw) { return raw.trim().replace(/\s+/g, ' '); }
      function isValidName(raw) { return cleanText(raw).length >= 2; }
      function isValidAge(raw) {
        const n = Number(raw);
        return Number.isInteger(n) && n >= 3 && n <= 18;
      }

      function loadLeads() {
        try { return JSON.parse(localStorage.getItem('jasdaryn_leads') || '[]'); }
        catch { return []; }
      }
      function saveLeads(leads) { localStorage.setItem('jasdaryn_leads', JSON.stringify(leads)); }

      function showError(text) {
        msg.className = 'msg err';
        msg.textContent = text;
      }
      function showOk(text) {
        msg.className = 'msg ok';
        msg.textContent = text;
      }

      submitBtn.addEventListener('click', () => {
        const clubs = getSelectedClubs();
        const phone = phoneInput.value;
        const firstName = firstNameInput.value;
        const lastName = lastNameInput.value;
        const age = ageInput.value;

        if (!isValidName(firstName)) return showError('Введите имя (минимум 2 символа).');
        if (!isValidName(lastName)) return showError('Введите фамилию (минимум 2 символа).');
        if (!isValidAge(age)) return showError('Введите корректный возраст от 3 до 18.');
        if (clubs.length === 0) return showError('Пожалуйста, выберите хотя бы один кружок.');
        if (!isValidPhone(phone)) return showError('Введите корректный номер телефона (10–12 цифр).');

        const lead = {
          firstName: cleanText(firstName),
          lastName: cleanText(lastName),
          age: Number(age),
          phone: normalizePhone(phone),
          clubs,
          createdAt: new Date().toISOString()
        };

        const leads = loadLeads();
        leads.unshift(lead);
        saveLeads(leads);

        // reset
        document.querySelectorAll('input[name="club"]').forEach(x => x.checked = false);
        firstNameInput.value = '';
        lastNameInput.value = '';
        ageInput.value = '';
        phoneInput.value = '';

        showOk('Заявка отправлена! Нажми “Посмотреть заявки”, чтобы увидеть сохранённые записи.');
        alert('Заявка отправлена!');
      });

      viewBtn.addEventListener('click', () => {
        const leads = loadLeads();
        if (leads.length === 0) return showError('Пока нет сохранённых заявок в этом браузере.');

        const pretty = leads.slice(0, 10).map((l, i) => {
          const date = new Date(l.createdAt).toLocaleString();
          return `${i+1}) ${l.firstName} ${l.lastName}, ${l.age} лет — ${l.phone}\n   кружки: ${l.clubs.join(', ')}\n   ${date}`;
        }).join('\n\n');

        msg.className = 'msg';
        msg.textContent = 'Последние заявки:\n\n' + pretty;
      });

      clearBtn.addEventListener('click', () => {
        saveLeads([]);
        showOk('Сохранённые заявки очищены (только в этом браузере).');
      });
    });
  </script>
</body>
</html>
